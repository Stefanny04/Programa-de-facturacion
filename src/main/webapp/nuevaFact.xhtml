<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:pe="http://primefaces.org/ui/extensions" 
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <title>Facturas</title>
            <link href="configLogotipo.css" rel="stylesheet" type="text/css"/>
        </h:head>
        <h:body>
            <main>
                <section class="contenedor banner3">
                    <div class="contenedor-banner3">

                        <h1>NUEVA</h1>
                        <h1>FACTURA</h1>
                    </div>
                </section>
                <p:panel>
                    <div>
                        <img src="imagenes/logotipo.jpg" alt="" class="imagen-logoEm"/> 
                        <div align="left" class="box">FACTURA DE VENTA</div>
                        <div align="center" class="box">Nº DE FACTURA: 0001</div>
                    </div>
                    <div><br/>
                        <div class="box" align="center" >MARKET HAPPY SHOPPING</div>
                        <div class="box">DIRECCIÓN: crra 90 #123 - 14</div>
                        <div class="box">NIT: 17,610,465-1</div>
                        <div class="box">TELÉFONO: 460147345</div>
                    </div>
                </p:panel>

                <p:panel>
                    <br/>
                    <div class="card">
                        <h:form>
                            <p:messages id="messages" showDetail="true" closable="true">
                                <p:autoUpdate/>
                            </p:messages>

                            <span class="ui-float-label">
                                <p:inputMask id="codigo" value="#{manejadorBean_Inv.codigoP}"/>
                                <p:outputLabel for="@previous" value="Codigo del producto"/>
                            </span><br/>
                            <span class="ui-float-label">
                                <p:inputMask id="cantidad" value="#{manejadorBean_Inv.cantidad}"/>
                                <p:outputLabel for="@previous" value="Cantidad"/>
                            </span><br/><br/>

                            <h5 class="p-mt-0">Elija un método de pago</h5>
                            <p:selectOneRadio value="#{manejadorBean_Inv.descuento}" unselectable="true">
                                <f:selectItem itemLabel="Tarjeta" itemValue="tarjeta"/>
                                <f:selectItem itemLabel="Efectivo" itemValue="efectivo"/>
                            </p:selectOneRadio>


                            <p:commandButton value="Agregar " action="#{manejadorBean_Inv.agregarDatos()}" update="tablita"
                                             ajax="false" icon="pi pi-check" validateClient="true"/>
                            <br/><br/>


                            <p:dataTable id="tablita" var="inventario" value="#{manejadorBean_Inv.agregarProd}" 
                                         rows="10" styleClass="p-mt-2" scrollable="true"
                                         scrollHeight="300">
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Codigo"/>
                                    </f:facet>
                                    <h:outputText value="#{inventario.producto.codigo}" />
                                </p:column>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Cantidad"/>
                                    </f:facet>
                                    <h:outputText value="#{inventario.cantidad}" />
                                </p:column>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Nombre"/>
                                    </f:facet>
                                    <h:outputText value="#{inventario.producto.nombreP}" />
                                </p:column>

                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Valor total del producto"/>
                                    </f:facet>
                                    <h:outputText value="$#{inventario.valorTproducto}" >
                                        <f:convertNumber currencySymbol="$"/>
                                    </h:outputText>
                                </p:column>
                                <p:columnGroup type="footer">
                                    <p:row>
                                        <p:column colspan="3" style="text-align:center" footerText="Total más impuestos:"/>
                                        <p:column footerText="$#{manejadorBean_Inv.valorTFactura}"/>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="3" style="text-align:center" footerText="Descuento aplicado:"/>
                                        <p:column footerText="$#{manejadorBean_Inv.desc}"/>
                                    </p:row>
                                </p:columnGroup>
                            </p:dataTable>

                        </h:form>
                    </div>
                </p:panel>
                <br/>
                <p:commandButton id="boton" value="Volver " action="index"/>
                <br/>

                <br/><br/>
                <footer>
                    <div class="contenedor-footer">
                        <img src="imagenes/un-pasado-ejemplar.png" alt="" class="imagen-logoU"/>
                        <h4>Universidad Central - Programa de facturación - 2021</h4>
                        <img src="imagenes/un-pasado-ejemplar.png" alt="" class="imagen-logoU" />
                    </div>
                </footer>
            </main>

        </h:body>
    </html>
</f:view>
